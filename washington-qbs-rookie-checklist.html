<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Washington Redskins/Commanders QB Rookie Cards (1982-2025)</title>
    <link rel="stylesheet" href="shared.css">
    <style>
        /* Washington Commanders Theme - Burgundy and Gold (Dark) */
        :root {
            --color-primary: #FFB612;
            --color-primary-dark: #5A1414;
            --color-accent: #FFB612;
            --color-background: linear-gradient(135deg, #5A1414 0%, #2a0a0a 100%);
            --color-surface: rgba(255,255,255,0.05);
            --color-text: #fff;
            --color-text-muted: #ccc;
            --color-text-light: #888;
            --auth-bg: rgba(0,0,0,0.2);
            --stat-bg: rgba(255,255,255,0.1);
            --stat-value-color: #FFB612;
            --card-border: transparent;
            --card-hover-color: rgba(255,182,18,0.5);
            --card-owned-bg: rgba(255,182,18,0.15);
            --card-owned-border: #FFB612;
        }

        * { margin: 0; padding: 0; }

        body {
            background: linear-gradient(135deg, #5A1414 0%, #2a0a0a 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        h1 {
            font-size: 2em;
            margin-bottom: 5px;
            color: #FFB612;
        }

        .subtitle { color: #ccc; }

        .auth-bar {
            padding: 10px;
            background: rgba(0,0,0,0.2);
        }

        .stat { background: rgba(255,255,255,0.1); }

        /* Dark theme form elements */
        select, input[type="text"] {
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.3);
            color: #fff;
        }

        .filters {
            background: transparent;
            box-shadow: none;
        }

        /* Era sections */
        .era-section { margin-bottom: 30px; }
        .era-title {
            font-size: 1.3em;
            color: #FFB612;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid rgba(255,182,18,0.3);
        }

        /* Card grid (uses different class name) */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        /* Dark theme cards */
        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 12px;
            border: 2px solid transparent;
        }

        .card:hover {
            border-color: rgba(255,182,18,0.5);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .card.owned {
            border-color: #FFB612;
            background: rgba(255,182,18,0.15);
        }

        .card.super-bowl { background: rgba(255,215,0,0.1); }
        .card.super-bowl.owned { background: rgba(39,174,96,0.2); }

        .card-image-wrapper {
            margin-bottom: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
        }

        .card-image { background: #1a1a1a; }
        .card-image.no-image {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 0.8em;
        }

        /* Price badge - different style for dark theme */
        .price-badge {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
        }

        .super-bowl-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            color: #000;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.65em;
            font-weight: bold;
            z-index: 1;
        }

        /* Player info */
        .player-name {
            font-size: 1em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 2px;
        }
        .player-years { font-size: 0.75em; color: #888; }
        .player-record { font-size: 0.7em; color: #aaa; }
        .card-info { font-size: 0.75em; color: #bbb; margin: 6px 0; }
        .card-set { color: #FFB612; }
        .achievement {
            display: inline-block;
            background: rgba(255,182,18,0.2);
            color: #FFB612;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65em;
            margin-top: 4px;
        }

        /* Card actions */
        .card-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .checkbox-wrapper {
            font-size: 0.8em;
            margin-top: 0;
        }
        .checkbox-wrapper input { width: 16px; height: 16px; }
        .checkbox-wrapper label { color: inherit; }

        .owned-badge {
            font-size: 0.8em;
            color: #FFB612;
        }

        .links a {
            color: #3498db;
            text-decoration: none;
            font-size: 0.75em;
            margin-left: 8px;
        }
        .links a:hover { text-decoration: underline; }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.85em;
        }

        /* Collection link card (Jayden Daniels promo) */
        .card.collection-link {
            background: linear-gradient(135deg, rgba(255,182,18,0.2), rgba(255,182,18,0.05));
            border: 2px solid rgba(255,182,18,0.4);
            cursor: pointer;
        }
        .card.collection-link:hover {
            border-color: #FFB612;
            background: linear-gradient(135deg, rgba(255,182,18,0.3), rgba(255,182,18,0.1));
        }
        .card.collection-link .card-stack {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card.collection-link .card-stack img {
            position: absolute;
            width: 70%;
            height: auto;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .card.collection-link .card-stack img:nth-child(1) { transform: rotate(-8deg) translateX(-15%); opacity: 0.7; }
        .card.collection-link .card-stack img:nth-child(2) { transform: rotate(5deg) translateX(15%); opacity: 0.85; }
        .card.collection-link .card-stack img:nth-child(3) { transform: rotate(0deg); z-index: 2; }
        .collection-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: linear-gradient(135deg, #FFB612, #f39c12);
            color: #000;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            z-index: 3;
        }
        .collection-cta {
            display: block;
            text-align: center;
            background: linear-gradient(135deg, #FFB612, #f39c12);
            color: #000;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.85em;
            margin-top: 8px;
            text-decoration: none;
            transition: transform 0.2s;
        }
        .collection-cta:hover { transform: scale(1.02); }

        @media (max-width: 600px) {
            .cards-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            h1 { font-size: 1.5em; }
            .card { padding: 8px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="auth-bar" id="auth-bar">
            <a href="index.html" class="back-link">← All Checklists</a>
            <div class="right-section">
                <span class="sync-status" id="sync-status"></span>
                <div id="auth-content"></div>
            </div>
        </div>

        <h1>Washington Redskins/Commanders</h1>
        <p class="subtitle">Starting QB Rookie Cards (1982-2025)</p>

        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="owned-count">0</div>
                <div class="stat-label">Owned</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="total-count">0</div>
                <div class="stat-label">Total Cards</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="total-value">$0</div>
                <div class="stat-label">Est. Value</div>
                <div class="stat-breakdown">
                    <span class="owned-value" id="owned-value">$0 owned</span>
                    <span class="needed-value" id="needed-value">$0 needed</span>
                </div>
            </div>
        </div>

        <div class="filters">
            <select id="sort-filter">
                <option value="default">Sort: Default (Era)</option>
                <option value="year">Sort: Card Year</option>
                <option value="price-low">Sort: Price (Low→High)</option>
                <option value="price-high">Sort: Price (High→Low)</option>
                <option value="winpct">Sort: Win %</option>
                <option value="wins">Sort: Games Won</option>
                <option value="games">Sort: Games Played</option>
                <option value="superbowl">Sort: Super Bowl Winners</option>
                <option value="owned">Sort: Owned First</option>
                <option value="needed">Sort: Needed First</option>
            </select>
            <select id="era-filter">
                <option value="all">All Eras</option>
                <option value="gibbs1">Gibbs Era I (1982-1992)</option>
                <option value="wilderness">Wilderness Years (1993-2003)</option>
                <option value="gibbs2">Gibbs Era II (2004-2007)</option>
                <option value="snyder">Snyder Era (2008-2019)</option>
                <option value="modern">Modern Era (2020-2025)</option>
            </select>
            <select id="status-filter">
                <option value="all">All Cards</option>
                <option value="owned">Owned Only</option>
                <option value="needed">Needed Only</option>
            </select>
            <input type="text" id="search" placeholder="Search player...">
        </div>

        <div id="cards-container"></div>

        <footer>
            <p>Prices are estimates for raw/ungraded cards. Data from SportsCardsPro.</p>
            <p>Super Bowl champions highlighted with gold badge.</p>
        </footer>
    </div>

    <script src="github-sync.js"></script>
    <script src="shared.js"></script>
    <script>
        const qbs = [
            // Gibbs Era I (1982-1992) - 3 Super Bowls
            { name: "Joe Theismann", years: "1982-1985", record: "39-13", playoff: "4-1", era: "gibbs1", set: "1975 Topps", num: "#416", price: 20, img: "washington-qbs-cards/theismann_1975_topps.webp", search: "joe+theismann+1975+topps+416", achievement: "SB XVII, 1983 MVP", superBowl: true },
            { name: "Jay Schroeder", years: "1986-1987", record: "12-4", playoff: "1-1", era: "gibbs1", set: "1986 Topps", num: "#172", price: 1.79, img: "washington-qbs-cards/schroeder_1986_topps.webp", search: "jay+schroeder+1986+topps+172" },
            { name: "Doug Williams", years: "1986-1989", record: "5-9", playoff: "4-0", era: "gibbs1", set: "1979 Topps", num: "#48", price: 3.99, img: "washington-qbs-cards/williams_1979_topps.webp", search: "doug+williams+1979+topps+48", achievement: "SB XXII MVP", superBowl: true },
            { name: "Doug Williams", years: "1986-1989", record: "5-9", playoff: "4-0", era: "gibbs1", set: "1984 Topps USFL", num: "#96", price: 6.11, img: "washington-qbs-cards/williams_1984_topps_usfl.webp", search: "doug+williams+1984+topps+usfl+96", achievement: "SB XXII MVP", superBowl: true },
            { name: "Ed Rubbert", years: "1987", record: "3-0", playoff: "-", era: "gibbs1", set: "1989 Collegiate", num: "#125", price: 3.00, img: "washington-qbs-cards/rubbert_1989_collegiate.webp", search: "ed+rubbert+1989+collegiate+collection+louisville", achievement: "3-0 in '87 strike" },
            { name: "Mark Rypien", years: "1988-1993", record: "42-24", playoff: "4-2", era: "gibbs1", set: "1989 Score", num: "#105", price: 1.81, img: "washington-qbs-cards/rypien_1989_score.webp", search: "mark+rypien+1989+score+105", achievement: "SB XXVI MVP", superBowl: true },
            { name: "Mark Rypien", years: "1988-1993", record: "42-24", playoff: "4-2", era: "gibbs1", set: "1989 Topps", num: "#253", price: 2.99, img: "washington-qbs-cards/rypien_1989_topps.webp", search: "mark+rypien+1989+topps+253", achievement: "SB XXVI MVP", superBowl: true },
            { name: "Mark Rypien", years: "1988-1993", record: "42-24", playoff: "4-2", era: "gibbs1", set: "1989 Pro Set", num: "#434", price: 0.99, img: "washington-qbs-cards/rypien_1989_proset.webp", search: "mark+rypien+1989+pro+set+434", achievement: "SB XXVI MVP", superBowl: true },
            { name: "Cary Conklin", years: "1990-1991", record: "0-2", playoff: "-", era: "gibbs1", set: "1990 Score", num: "#645", price: 1.34, img: "washington-qbs-cards/conklin_1990_score.webp", search: "cary+conklin+1990+score+645" },

            // Wilderness Years (1993-2003)
            { name: "Rich Gannon", years: "1993", record: "1-3", playoff: "-", era: "wilderness", set: "1990 Pro Set", num: "#568", price: 1.34, img: "washington-qbs-cards/gannon_1990_proset.webp", search: "rich+gannon+1990+pro+set+568", achievement: "2002 MVP (OAK)" },
            { name: "John Friesz", years: "1994", record: "1-3", playoff: "-", era: "wilderness", set: "1990 Score", num: "#309", price: 1.54, img: "washington-qbs-cards/friesz_1990_score.webp", search: "john+friesz+1990+score+309" },
            { name: "Heath Shuler", years: "1994-1996", record: "4-9", playoff: "-", era: "wilderness", set: "1994 Ultra", num: "#521", price: 1.32, img: "washington-qbs-cards/shuler_1994_ultra.webp", search: "heath+shuler+1994+ultra+521", achievement: "#3 Overall Pick" },
            { name: "Gus Frerotte", years: "1994-1998", record: "19-26-1", playoff: "-", era: "wilderness", set: "1995 Bowman's Best", num: "#4", price: 1.75, img: "washington-qbs-cards/frerotte_1995_bowmans-best.webp", search: "gus+frerotte+1995+bowmans+best+4" },
            { name: "Jeff Hostetler", years: "1997", record: "2-1", playoff: "-", era: "wilderness", set: "1990 Pro Set", num: "#596", price: 1.74, img: "washington-qbs-cards/hostetler_1990_pro-set.webp", search: "jeff+hostetler+1990+pro+set+596", achievement: "SB XXV (NYG)" },
            { name: "Trent Green", years: "1998-1999", record: "6-8", playoff: "-", era: "wilderness", set: "1993 Pro Set Power", num: "#PP3", price: 1.49, img: "washington-qbs-cards/green_1993_proset_power.webp", search: "trent+green+1993+pro+set+power+update+prospects+pp3" },
            { name: "Brad Johnson", years: "1999-2000", record: "17-10", playoff: "1-1", era: "wilderness", set: "1992 Wild Card", num: "#427", price: 3.90, img: "washington-qbs-cards/johnson_1992_wild-card.webp", search: "brad+johnson+1992+wild+card+427", achievement: "SB XXXVII (TB)" },
            { name: "Jeff George", years: "2000-2001", record: "1-6", playoff: "-", era: "wilderness", set: "1990 Action Packed", num: "#1", price: 1.44, img: "washington-qbs-cards/george_1990_action_packed.webp", search: "jeff+george+1990+action+packed+rookie+update+1", achievement: "#1 Overall Pick" },
            { name: "Tony Banks", years: "2001-2002", record: "8-6", playoff: "-", era: "wilderness", set: "1996 Leaf", num: "#176", price: 1.06, img: "washington-qbs-cards/banks_1996_leaf.webp", search: "tony+banks+1996+leaf+176" },
            { name: "Shane Matthews", years: "2002", record: "3-4", playoff: "-", era: "wilderness", set: "1999 Leaf R&S", num: "#39", price: 0.99, img: "washington-qbs-cards/matthews_1999_leaf_rookies_stars.webp", search: "shane+matthews+1999+leaf+rookies+stars+39" },
            { name: "Danny Wuerffel", years: "2002", record: "2-2", playoff: "-", era: "wilderness", set: "1997 Metal Universe", num: "#198", price: 1.51, img: "washington-qbs-cards/wuerffel_1997_metal_universe.webp", search: "danny+wuerffel+1997+metal+universe+198", achievement: "1996 Heisman" },
            { name: "Patrick Ramsey", years: "2002-2005", record: "10-14", playoff: "-", era: "wilderness", set: "2002 Bowman", num: "#150", price: 1.49, img: "washington-qbs-cards/ramsey_2002_bowman.webp", search: "patrick+ramsey+2002+bowman+150" },
            { name: "Tim Hasselbeck", years: "2003-2004", record: "1-4", playoff: "-", era: "wilderness", set: "2001 Topps", num: "#367", price: 1.77, img: "washington-qbs-cards/hasselbeck_2001_topps.webp", search: "tim+hasselbeck+2001+topps+367" },

            // Gibbs Era II (2004-2007)
            { name: "Mark Brunell", years: "2004-2006", record: "15-18", playoff: "1-1", era: "gibbs2", set: "1993 Pro Set Power Update", num: "#PP4", price: 1.50, img: "washington-qbs-cards/brunell_1993_proset_power.webp", search: "mark+brunell+1993+pro+set+power+update+prospects+pp4" },
            { name: "Jason Campbell", years: "2006-2009", record: "20-32", playoff: "-", era: "gibbs2", set: "2005 Absolute Mem.", num: "#5", price: 2.26, img: "washington-qbs-cards/campbell_2005_absolute_jersey.webp", search: "jason+campbell+2005+playoff+absolute+memorabilia+rookie+jerseys+5" },
            { name: "Smith/Campbell", years: "2005", record: "-", playoff: "-", era: "gibbs2", set: "2005 Leaf R&S Jersey", num: "#280", price: 2.75, img: "washington-qbs-cards/smith_campbell_2005_leaf_jersey.webp", search: "alex+smith+jason+campbell+2005+leaf+rookies+stars+jersey+280", achievement: "Dual Jersey /500" },
            { name: "Todd Collins", years: "2007", record: "3-0", playoff: "0-1", era: "gibbs2", set: "1995 Upper Deck", num: "#24", price: 0.90, img: "washington-qbs-cards/collins_1995_upper_deck.webp", search: "todd+collins+1995+upper+deck+24" },

            // Snyder Era (2008-2019)
            { name: "Donovan McNabb", years: "2010", record: "5-8", playoff: "-", era: "snyder", set: "1999 Press Pass", num: "#5", price: 1.54, img: "washington-qbs-cards/mcnabb_1999_press_pass.webp", search: "donovan+mcnabb+1999+press+pass+5", achievement: "6x Pro Bowl" },
            { name: "Rex Grossman", years: "2010-2011", record: "6-10", playoff: "-", era: "snyder", set: "2003 UD Rookie Prem.", num: "#RP-4", price: 1.49, img: "washington-qbs-cards/grossman_2003_ud_rookie_premiere.webp", search: "rex+grossman+2003+upper+deck+rookie+premiere+rp-4", achievement: "SB XLI (CHI)" },
            { name: "John Beck", years: "2011", record: "0-3", playoff: "-", era: "snyder", set: "2007 UD Rookie Premiere", num: "#RP-JB", price: 1.50, img: "washington-qbs-cards/beck_2007_ud_rookie_premiere.webp", search: "john+beck+2007+upper+deck+rookie+premiere" },
            { name: "Robert Griffin III", years: "2012-2015", record: "14-21", playoff: "0-1", era: "snyder", set: "2012 R&S Auto Jersey", num: "#217", price: 12.83, img: "washington-qbs-cards/rg3_2012_rookies_stars_auto_jersey.webp", search: "robert+griffin+iii+2012+panini+rookies+stars+autograph+jersey+217", achievement: "2012 OROY" },
            { name: "Kirk Cousins", years: "2012-2017", record: "26-30-1", playoff: "0-1", era: "snyder", set: "2012 Prizm Auto", num: "#277", price: 5.99, img: "washington-qbs-cards/cousins_2012_prizm_auto.webp", search: "kirk+cousins+2012+panini+prizm+rookie+autograph+277", achievement: "4x Pro Bowl" },
            { name: "Colt McCoy", years: "2014-2019", record: "1-6", playoff: "-", era: "snyder", set: "2010 Absolute Auto", num: "#203", price: 5.52, img: "washington-qbs-cards/mccoy_2010_absolute_auto.webp", search: "colt+mccoy+2010+panini+absolute+memorabilia+rookie+premiere+materials+autograph+203" },
            { name: "Alex Smith", years: "2018-2020", record: "11-5", playoff: "-", era: "snyder", set: "2005 UD Rookie Prosp.", num: "#RP-AS", price: 0.99, img: "washington-qbs-cards/smith_2005_ud_rookie_prospects.webp", search: "alex+smith+2005+upper+deck+rookie+prospects+rp-as", achievement: "2020 CPOY" },
            { name: "Case Keenum", years: "2019", record: "1-7", playoff: "-", era: "snyder", set: "2012 Panini R&S", num: "#159", price: 1.03, img: "washington-qbs-cards/keenum_2012_panini-rookies-stars.webp", search: "case+keenum+2012+panini+rookies+stars+159" },
            { name: "Dwayne Haskins", years: "2019-2020", record: "3-10", playoff: "-", era: "snyder", set: "2019 Optic Auto", num: "#151", price: 9.70, img: "washington-qbs-cards/haskins_2019_optic_auto.webp", search: "dwayne+haskins+2019+donruss+optic+rated+rookie+autographs+151", achievement: "1st Rd Pick, RIP" },

            // Modern Era (2020-2025)
            { name: "Ryan Fitzpatrick", years: "2021", record: "0-1", playoff: "-", era: "modern", set: "2005 UD Reflections", num: "#182", price: 3.04, img: "washington-qbs-cards/fitzpatrick_2005_ud_reflections.webp", search: "ryan+fitzpatrick+2005+upper+deck+reflections+182", achievement: "17-year career" },
            { name: "Taylor Heinicke", years: "2020-2022", record: "12-11-1", playoff: "0-1", era: "modern", set: "2015 Prizm", num: "#288", price: 1.89, img: "washington-qbs-cards/heinicke_2015_prizm.webp", search: "taylor+heinicke+2015+prizm+288" },
            { name: "Carson Wentz", years: "2022", record: "2-5", playoff: "-", era: "modern", set: "2016 Donruss Optic", num: "#156", price: 1.99, img: "washington-qbs-cards/wentz_2016_donruss_optic.webp", search: "carson+wentz+2016+donruss+optic+156", achievement: "#2 Overall Pick" },
            { name: "Sam Howell", years: "2022-2023", record: "5-13", playoff: "-", era: "modern", set: "2022 Prizm Jersey", num: "#PJ-SH", price: 2.17, img: "washington-qbs-cards/howell_2022_prizm_jersey.webp", search: "sam+howell+2022+panini+prizm+premier+jerseys+pj-sh" },
            { name: "Jayden Daniels", years: "2024-2025", record: "14-10", playoff: "2-1", era: "modern", collectionLink: "jayden-daniels-rookie-checklist.html", cardCount: 41, achievement: "2024 OROY" },
            { name: "Marcus Mariota", years: "2025", record: "2-6", playoff: "-", era: "modern", set: "2015 Finest Atomic", num: "#ARDC-MM", price: 2.91, img: "washington-qbs-cards/mariota_2015_finest_die_cut.webp", search: "marcus+mariota+2015+topps+finest+atomic+rookie+die+cut", achievement: "#2 Overall Pick" },
            { name: "Josh Johnson", years: "2025", record: "1-1", playoff: "-", era: "modern", set: "2008 Upper Deck", num: "#258", price: 1.01, img: "washington-qbs-cards/johnson_2008_upper_deck.webp", search: "josh+johnson+2008+upper+deck+258" },
        ];

        // Initialize ChecklistManager
        let jaydenDanielsStats = { owned: 0, total: 41 };

        const checklistManager = new ChecklistManager({
            checklistId: 'washington-qbs',
            ownerUsername: 'iammike',
            localStorageKey: 'washington-qbs-owned',
            onOwnedChange: () => { render(); }
        });

        // Wrapper functions for backward compatibility
        function getCardId(qb) {
            return btoa(qb.name + qb.set + qb.num).replace(/[^a-zA-Z0-9]/g, '');
        }

        function isOwned(cardId) {
            return checklistManager.isOwned(cardId);
        }

        function toggleOwned(cardId) {
            const owned = isOwned(cardId);
            checklistManager.toggleOwned(cardId, !owned);
        }

        async function loadJaydenDanielsStats() {
            // Try to load Jayden Daniels checklist data to show owned count
            try {
                if (window.githubSync && githubSync.isLoggedIn()) {
                    const jdOwned = await githubSync.loadChecklist('jayden-daniels');
                    if (jdOwned) {
                        jaydenDanielsStats.owned = jdOwned.length;
                    }
                } else if (window.githubSync) {
                    // Load from public gist for visitors
                    const jdOwned = await githubSync.loadPublicChecklist('jayden-daniels');
                    if (jdOwned) {
                        jaydenDanielsStats.owned = jdOwned.length;
                    }
                } else {
                    // Fall back to localStorage
                    const localJD = JSON.parse(localStorage.getItem('jaydenDanielsOwned') || '[]');
                    jaydenDanielsStats.owned = localJD.length;
                }
            } catch (e) {
                console.log('Could not load Jayden Daniels stats');
            }
        }

        function getCardYear(qb) {
            const match = qb.set.match(/(\d{4})/);
            return match ? parseInt(match[1]) : 0;
        }

        function getWinPct(qb) {
            if (!qb.record || qb.record === '-') return 0;
            const parts = qb.record.split('-');
            if (parts.length < 2) return 0;
            const wins = parseInt(parts[0]) || 0;
            const losses = parseInt(parts[1]) || 0;
            const total = wins + losses;
            return total > 0 ? wins / total : 0;
        }

        function getWins(qb) {
            if (!qb.record || qb.record === '-') return 0;
            const parts = qb.record.split('-');
            return parseInt(parts[0]) || 0;
        }

        function getGamesPlayed(qb) {
            if (!qb.record || qb.record === '-') return 0;
            const parts = qb.record.split('-');
            if (parts.length < 2) return 0;
            const wins = parseInt(parts[0]) || 0;
            const losses = parseInt(parts[1]) || 0;
            return wins + losses;
        }

        function sortQbs(qbsToSort, sortBy) {
            const sorted = [...qbsToSort];
            switch (sortBy) {
                case 'year':
                    sorted.sort((a, b) => getCardYear(a) - getCardYear(b));
                    break;
                case 'price-low':
                    sorted.sort((a, b) => (a.price || 0) - (b.price || 0));
                    break;
                case 'price-high':
                    sorted.sort((a, b) => (b.price || 0) - (a.price || 0));
                    break;
                case 'winpct':
                    sorted.sort((a, b) => getWinPct(b) - getWinPct(a));
                    break;
                case 'wins':
                    sorted.sort((a, b) => getWins(b) - getWins(a));
                    break;
                case 'games':
                    sorted.sort((a, b) => getGamesPlayed(b) - getGamesPlayed(a));
                    break;
                case 'superbowl':
                    sorted.sort((a, b) => (b.superBowl ? 1 : 0) - (a.superBowl ? 1 : 0));
                    break;
                case 'owned':
                    sorted.sort((a, b) => {
                        const ownedA = isOwned(getCardId(a)) ? 0 : 1;
                        const ownedB = isOwned(getCardId(b)) ? 0 : 1;
                        return ownedA - ownedB;
                    });
                    break;
                case 'needed':
                    sorted.sort((a, b) => {
                        const ownedA = isOwned(getCardId(a)) ? 1 : 0;
                        const ownedB = isOwned(getCardId(b)) ? 1 : 0;
                        return ownedA - ownedB;
                    });
                    break;
            }
            return sorted;
        }

        function renderQbCard(qb) {
            const cardId = qb.collectionLink ? null : getCardId(qb);
            const cardOwned = cardId ? isOwned(cardId) : false;

            // Special handling for collection link cards
            if (qb.collectionLink) {
                const jdBadge = jaydenDanielsStats.owned > 0
                    ? `${jaydenDanielsStats.owned} / ${qb.cardCount}`
                    : `${qb.cardCount} CARDS`;
                return `<div class="card collection-link" onclick="window.location.href='${qb.collectionLink}'">
                    <div class="card-image-wrapper">
                        <span class="collection-badge">${jdBadge}</span>
                        <div class="card-stack">
                            <img src="jayden-daniels-cards/card_00_wm8AAeSw.webp" alt="">
                            <img src="jayden-daniels-cards/card_03_MuMAAOSw.webp" alt="">
                            <img src="jayden-daniels-cards/resurgence_196.webp" alt="">
                        </div>
                    </div>
                    <div class="player-name">${qb.name}</div>
                    <div class="player-years">${qb.years} &bull; ${qb.record}</div>
                    ${qb.playoff !== '-' ? `<div class="player-record">Playoffs: ${qb.playoff}</div>` : ''}
                    ${qb.achievement ? `<span class="achievement">${qb.achievement}</span>` : ''}
                    <a href="${qb.collectionLink}" class="collection-cta">View Full Collection →</a>
                </div>`;
            }

            const cardClass = `card ${cardOwned ? 'owned' : ''} ${qb.superBowl ? 'super-bowl' : ''}`;

            return `<div class="${cardClass}">
                <div class="card-image-wrapper">
                    ${qb.superBowl ? '<span class="super-bowl-badge">SUPER BOWL</span>' : ''}
                    <span class="price-badge">$${Math.max(1, Math.round(qb.price))}</span>
                    <img class="card-image" src="${qb.img}" alt="${qb.name}" onerror="this.style.display='none'">
                </div>
                <div class="player-name">${qb.name}</div>
                <div class="player-years">${qb.years} &bull; ${qb.record}</div>
                ${qb.playoff !== '-' ? `<div class="player-record">Playoffs: ${qb.playoff}</div>` : ''}
                <div class="card-info">
                    <span class="card-set">${qb.set}</span> ${qb.num}
                </div>
                ${qb.achievement ? `<span class="achievement">${qb.achievement}</span>` : ''}
                <div class="card-actions">
                    ${!checklistManager.isReadOnly ? `<label class="checkbox-wrapper">
                        <input type="checkbox" ${cardOwned ? 'checked' : ''} onchange="toggleOwned('${cardId}')">
                        <span>Owned</span>
                    </label>` : (cardOwned ? '<span class="owned-badge">✓ Owned</span>' : '<span></span>')}
                    <span class="links">
                        <a href="https://www.ebay.com/sch/i.html?_nkw=${qb.search}&LH_BIN=1&_sop=15" target="_blank">eBay</a>
                        <a href="https://www.sportscardspro.com/search-products?q=${encodeURIComponent(qb.name + ' rookie')}&type=prices" target="_blank">More</a>
                    </span>
                </div>
            </div>`;
        }

        function render() {
            const sortBy = document.getElementById('sort-filter').value;
            const eraFilter = document.getElementById('era-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            const searchTerm = document.getElementById('search').value.toLowerCase();

            let filtered = qbs.filter(qb => {
                if (eraFilter !== 'all' && qb.era !== eraFilter) return false;
                const cardId = qb.collectionLink ? null : getCardId(qb);
                if (statusFilter === 'owned' && (!cardId || !isOwned(cardId))) return false;
                if (statusFilter === 'needed' && cardId && isOwned(cardId)) return false;
                if (searchTerm && !qb.name.toLowerCase().includes(searchTerm)) return false;
                return true;
            });

            const container = document.getElementById('cards-container');

            // For non-default sort, render as flat list
            if (sortBy !== 'default') {
                const sorted = sortQbs(filtered, sortBy);
                let html = '<div class="era-section"><div class="cards-grid">';
                sorted.forEach(qb => {
                    html += renderQbCard(qb);
                });
                html += '</div></div>';
                container.innerHTML = html;
                updateStats(filtered);
                return;
            }

            // Default: group by era
            const eras = {
                gibbs1: { title: "Gibbs Era I (1982-1992) - 3 Super Bowls", cards: [] },
                wilderness: { title: "Wilderness Years (1993-2003)", cards: [] },
                gibbs2: { title: "Gibbs Era II (2004-2007)", cards: [] },
                snyder: { title: "Snyder Era (2008-2019)", cards: [] },
                modern: { title: "Modern Era (2020-2025)", cards: [] }
            };

            filtered.forEach(qb => {
                eras[qb.era].cards.push(qb);
            });

            let html = '';
            Object.entries(eras).forEach(([key, era]) => {
                if (era.cards.length === 0) return;
                html += `<div class="era-section">
                    <h2 class="era-title">${era.title}</h2>
                    <div class="cards-grid">`;
                era.cards.forEach(qb => {
                    html += renderQbCard(qb);
                });
                html += '</div></div>';
            });

            container.innerHTML = html;
            updateStats(filtered);
        }

        function updateStats(filteredQbs) {
            // Use filtered list if provided, otherwise use all
            const visibleQbs = filteredQbs || qbs;
            // Exclude collection link cards from counts
            const countableQbs = visibleQbs.filter(qb => !qb.collectionLink);
            const ownedCount = countableQbs.filter(qb => isOwned(getCardId(qb))).length;
            const totalCount = countableQbs.length;
            let totalValue = 0, ownedValue = 0, neededValue = 0;
            countableQbs.forEach(qb => {
                const price = qb.price || 0;
                totalValue += price;
                if (isOwned(getCardId(qb))) {
                    ownedValue += price;
                } else {
                    neededValue += price;
                }
            });

            document.getElementById('owned-count').textContent = ownedCount;
            document.getElementById('total-count').textContent = totalCount;
            document.getElementById('total-value').textContent = '$' + Math.round(totalValue);
            document.getElementById('owned-value').textContent = '$' + Math.round(ownedValue) + ' owned';
            document.getElementById('needed-value').textContent = '$' + Math.round(neededValue) + ' needed';
        }

        document.getElementById('sort-filter').addEventListener('change', render);
        document.getElementById('era-filter').addEventListener('change', render);
        document.getElementById('status-filter').addEventListener('change', render);
        document.getElementById('search').addEventListener('input', render);

        // Initialize
        async function init() {
            await checklistManager.init();
            try {
                await loadJaydenDanielsStats();
            } catch (e) {
                console.error('Failed to load Jayden Daniels stats:', e);
            }
            render();
        }
        init();
    </script>
</body>
</html>
