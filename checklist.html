<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; img-src 'self' https: data:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://api.github.com https://cards-oauth.iammikec.workers.dev;">
    <title>Loading...</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="shared.css">
    <style id="dynamic-theme"></style>
</head>
<body>
    <nav class="nav-bar">
        <div class="nav-inner">
            <a href="index.html" class="nav-brand" title="All Checklists">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="8" height="11" rx="1" opacity="0.7"/>
                    <rect x="13" y="3" width="8" height="11" rx="1"/>
                    <rect x="3" y="16" width="18" height="5" rx="1" opacity="0.4"/>
                </svg>
                <span class="nav-brand-text">MIKE'S CARDS</span>
            </a>
            <div class="nav-divider"></div>
            <div class="nav-links">
                <a href="washington-qbs-rookie-checklist.html" class="nav-link">WASHINGTON QBS</a>
            </div>
            <div class="nav-divider"></div>
            <div class="nav-auth">
                <span class="sync-status" id="sync-status"></span>
                <div id="auth-content"></div>
            </div>
        </div>
    </nav>

    <div id="checklist-root">
        <div class="page-header" id="page-header">
            <h1 id="page-title">Loading...</h1>
            <p class="subtitle" id="page-subtitle"></p>
            <div id="page-intro"></div>
            <div class="stats" id="page-stats">
                <div class="stat">
                    <div class="stat-value" id="owned-count">0</div>
                    <div class="stat-label">Owned</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="total-count">0</div>
                    <div class="stat-label" id="total-label">Total Cards</div>
                </div>
                <div class="stat">
                    <div class="stat-value highlight" id="total-value">$0</div>
                    <div class="stat-label">Est. Value</div>
                    <div class="stat-breakdown">
                        <span class="owned-value" id="owned-value">$0 owned</span>
                        <span class="needed-value" id="needed-value">$0 needed</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="page-content" id="page-content">
            <div class="filters" id="filters-container"></div>
            <div id="sections-container"></div>
        </div>
    </div>

    <script src="github-sync.js"></script>
    <script src="shared.js"></script>
    <script src="checklist-engine.js"></script>
    <script>
        const engine = new ChecklistEngine();
        engine.init().catch(err => {
            console.error('Failed to initialize checklist:', err);
            const content = document.getElementById('page-content');
            content.innerHTML = `
                <div style="padding:20px;text-align:center;">
                    <p style="color:#ff5252;margin-bottom:12px;">Failed to load checklist.</p>
                    <a href="index.html" style="color:#667eea;">Back to all checklists</a>
                </div>`;
        });
    </script>
</body>
</html>
