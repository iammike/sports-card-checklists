<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JMU Pro Players Card Checklist</title>
    <link rel="stylesheet" href="shared.css">
    <style>
        /* JMU Theme - Purple and Gold */
        :root {
            --color-primary: #450084;
            --color-primary-dark: #6b2fa0;
            --color-accent: #C9A227;
            --auth-bg: linear-gradient(135deg, #450084 0%, #2d0057 100%);
            --auth-link-color: #C9A227;
            --stat-bg: linear-gradient(135deg, #450084 0%, #2d0057 100%);
            --stat-value-color: #C9A227;
            --stat-label-color: #ccc;
            --card-hover-color: #450084;
        }

        h1 { color: #450084; }

        .auth-bar {
            background: linear-gradient(135deg, #450084 0%, #2d0057 100%);
        }
        .auth-bar .back-link { color: #C9A227; }

        .stat {
            background: linear-gradient(135deg, #450084 0%, #2d0057 100%);
        }

        .group-header {
            background: linear-gradient(135deg, #450084 0%, #2d0057 100%);
            border-bottom-color: #C9A227;
        }

        .card:hover {
            box-shadow: 0 4px 15px rgba(69,0,132,0.3);
        }

        .price-link:hover { color: #450084; }
        .card-image.placeholder:hover { color: #450084; }
        .search-link { color: #450084; }

        .read-only-notice {
            background: rgba(201,162,39,0.2);
            color: #C9A227;
        }

        /* Section header variants */
        .section-header.hof {
            background: linear-gradient(135deg, #C9A227 0%, #a88420 100%);
            color: #450084;
        }
        .section-header.usfl {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        .section-header.mlb {
            background: linear-gradient(135deg, #e74c3c 0%, #1a4789 100%);
        }
        .section-header.modern {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        }

        /* Player name and badges */
        .player-name {
            font-size: 14px;
            font-weight: bold;
            color: #450084;
            margin-bottom: 4px;
        }
        .player-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 9px;
            font-weight: bold;
            margin-left: 4px;
        }
        .player-badge.hof {
            background: #C9A227;
            color: #450084;
        }
        .player-badge.sb {
            background: #450084;
            color: #C9A227;
        }
        .player-badge.pb {
            background: #6b2fa0;
            color: white;
        }

        /* Intro text */
        .intro-text {
            background: linear-gradient(135deg, rgba(69,0,132,0.05) 0%, rgba(201,162,39,0.05) 100%);
            border: 1px solid rgba(69,0,132,0.1);
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }
        .intro-text strong {
            color: #450084;
        }

        /* Extras/Alternates section */
        .alternates-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .alternates-header:hover {
            filter: brightness(1.1);
        }
        #alternates-toggle {
            transition: transform 0.2s;
        }
        #alternates-toggle.expanded {
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <div class="auth-bar" id="auth-bar">
        <a href="index.html" class="back-link">← All Checklists</a>
        <div class="right-section">
            <span class="sync-status" id="sync-status"></span>
            <div id="auth-content"></div>
        </div>
    </div>

    <h1>JMU Pro Players Card Checklist</h1>
    <p class="subtitle">James Madison University Alumni in Professional Sports</p>

    <div class="intro-text">
        <strong>Go Dukes!</strong> This checklist features trading cards of James Madison University alumni who made it to the pros.
        Highlights include <strong>Hall of Famer Charles Haley</strong> (5x Super Bowl champion),
        <strong>Gary Clark</strong> (4x Pro Bowl, 2x Super Bowl), and <strong>Scott Norwood</strong> (famous for "Wide Right").
    </div>

    <div class="stats">
        <div class="stat">
            <div class="stat-value" id="owned-count">0</div>
            <div class="stat-label">Owned</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="total-count">0</div>
            <div class="stat-label">Total Cards</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="total-value">$0</div>
            <div class="stat-label">Est. Value</div>
            <div class="stat-breakdown">
                <span class="owned-value" id="owned-value">$0 owned</span>
                <span class="needed-value" id="needed-value">$0 needed</span>
            </div>
        </div>
    </div>

    <div class="filters">
        <select id="status-filter">
            <option value="all">All Cards</option>
            <option value="owned">Owned Only</option>
            <option value="need">Needed Only</option>
        </select>
        <select id="sport-filter">
            <option value="all">All Sports</option>
            <option value="football">Football Only</option>
            <option value="mlb">MLB Only</option>
            <option value="nba">NBA Only</option>
            <option value="mls">MLS Only</option>
        </select>
        <input type="text" id="search" placeholder="Search cards...">
    </div>

    <!-- Football (NFL + USFL) -->
    <div class="section" id="football-section">
        <div class="section-header">Football</div>
        <div class="card-grid" id="football-cards"></div>
    </div>

    <!-- MLB -->
    <div class="section" id="mlb-section">
        <div class="section-header mlb">MLB</div>
        <div class="card-grid" id="mlb-cards"></div>
    </div>

    <!-- NBA -->
    <div class="section" id="nba-section">
        <div class="section-header" style="background: linear-gradient(135deg, #1d428a 0%, #c9082a 100%);">NBA</div>
        <div class="card-grid" id="nba-cards"></div>
    </div>

    <!-- MLS -->
    <div class="section" id="mls-section">
        <div class="section-header" style="background: linear-gradient(135deg, #013a5e 0%, #5c9e31 100%);">MLS</div>
        <div class="card-grid" id="mls-cards"></div>
    </div>

    <!-- EXTRAS -->
    <div class="section" id="alternates-section" style="display: none;">
        <div class="section-header alternates-header" onclick="toggleAlternatesSection()" style="cursor: pointer; background: linear-gradient(135deg, #666 0%, #444 100%);">
            <span id="alternates-toggle" class="expanded">▼</span> Extra Cards <span id="alternates-count" style="font-weight: normal; font-size: 14px; opacity: 0.8;"></span>
        </div>
        <div class="card-grid" id="alternates-cards"></div>
    </div>

    <button class="clear-btn" onclick="clearAll()">Clear All</button>

    <script src="github-sync.js"></script>
    <script>
        const cards = {
            hof: [
                {
                    player: "Charles Haley",
                    badges: ["HOF", "5x SB"],
                    set: "1987 Topps",
                    num: "#125",
                    name: "Rookie Card",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "charles+haley+1987+topps+125+rookie",
                    img: "jmu-cards/haley_1987_topps.webp"
                },
            ],
            probowl: [
                {
                    player: "Gary Clark",
                    badges: ["4x PB", "2x SB"],
                    set: "1986 Topps",
                    num: "#176",
                    name: "NFL Rookie Card",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "gary+clark+1986+topps+176+redskins+rookie",
                    img: "jmu-cards/clark_1986_topps.webp"
                },
                {
                    player: "Scott Norwood",
                    badges: [],
                    set: "1989 Score",
                    num: "#290",
                    name: "NFL Rookie Card",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "scott+norwood+1989+score+290+bills",
                    img: "jmu-cards/norwood_1989_score.webp"
                },
                {
                    player: "Scott Norwood",
                    badges: [],
                    set: "1989 Topps",
                    num: "#42",
                    name: "NFL Rookie Card",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "scott+norwood+1989+topps+42+bills",
                    img: "jmu-cards/norwood_1989_topps.webp",
                    alternate: true
                },
            ],
            usfl: [
                {
                    player: "Gary Clark",
                    badges: [],
                    set: "1985 Topps USFL",
                    num: "#49",
                    name: "Jacksonville Bulls",
                    type: "XRC",
                    sport: "usfl",
                    price: 7,
                    search: "gary+clark+1985+topps+usfl+49+bulls",
                    img: "jmu-cards/clark_1985_usfl.webp"
                },
                {
                    player: "Scott Norwood",
                    badges: [],
                    set: "1984 Topps USFL",
                    num: "#14",
                    name: "Birmingham Stallions",
                    type: "XRC",
                    sport: "usfl",
                    price: 3,
                    search: "scott+norwood+1984+topps+usfl+14+stallions",
                    img: "jmu-cards/norwood_1984_usfl.webp"
                },
            ],
            modern: [
                {
                    player: "Ed Perry",
                    badges: [],
                    set: "1997 Score Board NFL Rookies",
                    num: "#44",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ed+perry+1997+score+board+nfl+rookies+44+dolphins",
                    img: "jmu-cards/perry_1997_scoreboard.webp",
                    alternate: true
                },
                {
                    player: "Ed Perry",
                    badges: [],
                    set: "1997 Score Board NFL Rookies",
                    num: "#44",
                    name: "Dean's List",
                    type: "Insert RC",
                    sport: "nfl",
                    price: 3,
                    search: "ed+perry+1997+score+board+deans+list",
                    img: "jmu-cards/perry_1997_deanslist.webp"
                },
                {
                    player: "Macey Brooks",
                    badges: [],
                    set: "2000 Topps",
                    num: "#76",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "macey+brooks+2000+topps+76+bears",
                    img: "jmu-cards/brooks_2000_topps.webp"
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Topps Stars",
                    num: "#155",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+topps+stars+155+bengals",
                    img: "jmu-cards/keaton_2000_toppsstars.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Topps Season Opener",
                    num: "#201",
                    name: "NFL Draft Pick",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+topps+season+opener+201+bengals",
                    img: "jmu-cards/keaton_2000_seasonopener.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Topps",
                    num: "#374",
                    name: "NFL Draft Pick",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "curtis+keaton+2000+topps+374",
                    img: "jmu-cards/keaton_2000_topps.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 SkyBox",
                    num: "#243",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+skybox+243",
                    img: "jmu-cards/keaton_2000_skybox.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Bowman Chrome",
                    num: "#182",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+bowman+chrome+182",
                    img: "jmu-cards/keaton_2000_bowmanchrome.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Fleer E-X",
                    num: "#136",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "curtis+keaton+2000+fleer+e-x+136",
                    img: "jmu-cards/keaton_2000_fleerex.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Playoff Absolute",
                    num: "#216",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "curtis+keaton+2000+playoff+absolute+216",
                    img: "jmu-cards/keaton_2000_playoffabsolute.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 UD Ionix",
                    num: "#84",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "curtis+keaton+2000+ud+ionix+84",
                    img: "jmu-cards/keaton_2000_ionix.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Upper Deck",
                    num: "#265",
                    name: "Star Rookie",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+upper+deck+star+rookie+265",
                    img: "jmu-cards/keaton_2000_upperdeck.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Upper Deck Victory",
                    num: "#284",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+upper+deck+victory+284",
                    img: "jmu-cards/keaton_2000_victory.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Score",
                    num: "#295",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+score+295",
                    img: "jmu-cards/keaton_2000_score.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Fleer Tradition",
                    num: "#341",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+fleer+tradition+341",
                    img: "jmu-cards/keaton_2000_fleertradition.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Playoff Absolute",
                    num: "#RR29",
                    name: "Rookie Reflex",
                    type: "Insert RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+playoff+absolute+rookie+reflex+RR29",
                    img: "jmu-cards/keaton_2000_rookiereflex.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Bowman",
                    num: "#182",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+bowman+182",
                    img: "jmu-cards/keaton_2000_bowman.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Fleer Metal",
                    num: "#236",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+metal",
                    img: "jmu-cards/keaton_2000_metal.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Stadium Club",
                    num: "#165",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+stadium+club+165",
                    img: "jmu-cards/keaton_2000_stadiumclub.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Upper Deck Encore",
                    num: "#215",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+upper+deck+encore",
                    img: "jmu-cards/keaton_2000_encore.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Sage",
                    num: "#23",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+sage+23",
                    img: "jmu-cards/keaton_2000_sage.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Sage HIT",
                    num: "#23",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+sage+hit+23",
                    img: "jmu-cards/keaton_2000_sagehit.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Bowman",
                    num: "#CK",
                    name: "Certified Autograph Issue",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 2,
                    search: "curtis+keaton+2000+bowman+certified+auto",
                    img: "jmu-cards/keaton_2000_bowmancertified.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Fleer Tradition",
                    num: "#CK",
                    name: "Autographics",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 3,
                    search: "curtis+keaton+2000+fleer+autographics",
                    img: "jmu-cards/keaton_2000_fleerautographics.webp"
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Playoff Contenders",
                    num: "#134",
                    name: "Rookie Ticket Auto",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 2,
                    search: "curtis+keaton+2000+playoff+contenders+134+auto",
                    img: "jmu-cards/keaton_2000_playoffcontenders.webp",
                    alternate: true
                },
                {
                    player: "Curtis Keaton",
                    badges: [],
                    set: "2000 Sage",
                    num: "#A23",
                    name: "Autographs Red",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 1,
                    search: "curtis+keaton+2000+sage+auto+A23",
                    img: "jmu-cards/keaton_2000_sageauto.webp",
                    alternate: true
                },
                {
                    player: "Mike Cawley",
                    badges: [],
                    set: "2001 Topps XFL",
                    num: "#6",
                    name: "Base",
                    type: "Base",
                    sport: "nfl",
                    price: 1,
                    search: "mike+cawley+2001+topps+xfl+6+outlaws",
                    img: "jmu-cards/cawley_2001_xfl.webp"
                },
                {
                    player: "Arthur Moats",
                    badges: [],
                    set: "2017 Panini Contenders",
                    num: "#205",
                    name: "Ticket Auto",
                    type: "Auto",
                    sport: "nfl",
                    price: 8,
                    search: "arthur+moats+2017+panini+contenders+205+auto+steelers",
                    img: "jmu-cards/moats_2017_contenders.webp"
                },
                {
                    player: "Jimmy Moreland",
                    badges: [],
                    set: "2019 Panini Contenders",
                    num: "#289",
                    name: "Rookie Ticket Auto",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 5,
                    search: "jimmy+moreland+2019+contenders+289+redskins+auto",
                    img: "jmu-cards/moreland_2019_contenders.webp"
                },
                {
                    player: "Jimmy Moreland",
                    badges: [],
                    set: "2019 Panini Select",
                    num: "#105",
                    name: "Concourse",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "jimmy+moreland+2019+select+105+redskins",
                    img: "jmu-cards/moreland_2019_select.webp",
                    alternate: true
                },
                {
                    player: "Jimmy Moreland",
                    badges: [],
                    set: "2019 Panini National Treasures",
                    num: "#185",
                    name: "Rookie Signatures",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 10,
                    search: "jimmy+moreland+2019+national+treasures+auto",
                    img: "jmu-cards/moreland_2019_nationaltreasures.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Donruss",
                    num: "#350",
                    name: "Rated Rookie",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+donruss+350+cowboys+rated+rookie",
                    img: "jmu-cards/dinucci_2020_donruss.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Donruss Optic",
                    num: "#200",
                    name: "Rated Rookie",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+donruss+optic+200+cowboys+rated+rookie",
                    img: "jmu-cards/dinucci_2020_optic.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Prestige",
                    num: "#265",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+prestige+265+cowboys",
                    img: "jmu-cards/dinucci_2020_prestige.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Prizm",
                    num: "#337",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+prizm+337",
                    img: "jmu-cards/dinucci_2020_prizm.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Select",
                    num: "#99",
                    name: "Concourse",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+select+99",
                    img: "jmu-cards/dinucci_2020_select.webp"
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Absolute",
                    num: "#110",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+absolute+110",
                    img: "jmu-cards/dinucci_2020_absolute.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Certified",
                    num: "#190",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "ben+dinucci+2020+certified+190",
                    img: "jmu-cards/dinucci_2020_certified.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Phoenix",
                    num: "#187",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 1,
                    search: "ben+dinucci+2020+phoenix+rookie",
                    img: "jmu-cards/dinucci_2020_phoenix.webp",
                    alternate: true
                },
                {
                    player: "Ben DiNucci",
                    badges: [],
                    set: "2020 Panini Contenders",
                    num: "#217",
                    name: "Rookie Ticket Auto",
                    type: "Auto RC",
                    sport: "nfl",
                    price: 12,
                    search: "ben+dinucci+2020+contenders+217+auto",
                    img: "jmu-cards/dinucci_2020_contenders.webp",
                    alternate: true
                },
                {
                    player: "Aaron Stinnie",
                    badges: ["SB"],
                    set: "2020 Panini Instant Super Bowl LV",
                    num: "#14",
                    name: "Base",
                    type: "Base RC",
                    sport: "nfl",
                    price: 2,
                    search: "aaron+stinnie+2020+panini+instant+super+bowl+buccaneers",
                    img: "jmu-cards/stinnie_2020_instant.webp"
                },
                ],
            mlb: [
                {
                    player: "Billy Sample",
                    badges: [],
                    set: "1979 Topps",
                    num: "#713",
                    name: "Rangers Prospects",
                    type: "Base RC (Shared)",
                    sport: "mlb",
                    price: 1,
                    search: "billy+sample+1979+topps+713+rangers+prospects",
                    img: "jmu-cards/sample_1979_topps.webp"
                },
            ],
            nba: [
                {
                    player: "Linton Townes",
                    badges: [],
                    set: "1991 Wild Card Collegiate",
                    num: "#9",
                    name: "Base",
                    type: "Base",
                    sport: "nba",
                    price: 2,
                    search: "linton+townes+1991+wild+card+collegiate",
                    img: "jmu-cards/townes_1991_wildcard.webp"
                },
            ],
            mls: [
                {
                    player: "CJ Sapong",
                    badges: ["ROY"],
                    set: "2011 Upper Deck Soccer",
                    num: "#183",
                    name: "Base",
                    type: "Base RC",
                    sport: "mls",
                    price: 1,
                    search: "cj+sapong+2011+upper+deck+soccer+183",
                    img: "jmu-cards/sapong_2011_upperdeck.webp",
                    alternate: true
                },
                {
                    player: "CJ Sapong",
                    badges: ["ROY"],
                    set: "2011 Upper Deck Soccer",
                    num: "#CS",
                    name: "Super Draft Exclusives Signatures",
                    type: "Auto RC",
                    sport: "mls",
                    price: 4,
                    search: "cj+sapong+2011+upper+deck+soccer+auto",
                    img: "jmu-cards/sapong_2011_upperdeck_auto.webp"
                },
            ],
        };

        const CHECKLIST_ID = 'jmu-pro-players';
        const OWNER_USERNAME = 'iammike';
        let ownedCards = [];
        let isReadOnly = false;

        function isOwner() {
            if (!window.githubSync || !githubSync.isLoggedIn()) return false;
            const user = githubSync.getUser();
            return user && user.login === OWNER_USERNAME;
        }

        function getCardId(card) {
            return btoa(card.player + card.set + card.num + card.name).replace(/[^a-zA-Z0-9]/g, '');
        }

        async function loadOwned() {
            if (window.githubSync && githubSync.isLoggedIn()) {
                setSyncStatus('syncing', 'Loading...');
                const cloudOwned = await githubSync.loadChecklist(CHECKLIST_ID);
                if (cloudOwned && cloudOwned.length > 0) {
                    ownedCards = cloudOwned;
                    localStorage.setItem('jmuProPlayersOwned', JSON.stringify(ownedCards));
                    setSyncStatus('synced', 'Synced');
                    return;
                }
                setSyncStatus('synced', 'Synced');
            } else if (window.githubSync) {
                const publicOwned = await githubSync.loadPublicChecklist(CHECKLIST_ID);
                if (publicOwned && publicOwned.length > 0) {
                    ownedCards = publicOwned;
                    return;
                }
            }
            ownedCards = JSON.parse(localStorage.getItem('jmuProPlayersOwned') || '[]');
        }

        async function saveOwned() {
            localStorage.setItem('jmuProPlayersOwned', JSON.stringify(ownedCards));
            if (window.githubSync && githubSync.isLoggedIn()) {
                setSyncStatus('syncing', 'Syncing...');
                const success = await githubSync.saveChecklist(CHECKLIST_ID, ownedCards);
                if (success) {
                    setSyncStatus('synced', 'Synced');
                } else {
                    setSyncStatus('error', 'Sync failed');
                }
            }
        }

        function isOwned(cardId) {
            return ownedCards.includes(cardId);
        }

        function toggleOwned(cardId, checkbox) {
            const owned = checkbox.checked;
            if (owned) {
                if (!ownedCards.includes(cardId)) ownedCards.push(cardId);
            } else {
                ownedCards = ownedCards.filter(id => id !== cardId);
            }
            saveOwned();
            // Re-render to handle alternate card swapping
            renderCards();
            applyFilters();
        }

        function setSyncStatus(status, text) {
            const el = document.getElementById('sync-status');
            el.className = 'sync-status ' + status;
            el.textContent = text;
            if (status === 'synced') {
                setTimeout(() => { el.textContent = ''; }, 2000);
            }
        }

        function updateAuthUI() {
            const authContent = document.getElementById('auth-content');
            if (githubSync.isLoggedIn()) {
                const user = githubSync.getUser();
                authContent.innerHTML = `
                    <span class="user-info">
                        <img src="${user.avatar_url}" alt="">
                        ${user.login}
                    </span>
                    <button class="logout" onclick="logout()">Sign out</button>
                `;
            } else {
                authContent.innerHTML = '';
            }
        }

        function logout() {
            githubSync.logout();
            location.reload();
        }

        function applyFilters() {
            const statusFilter = document.getElementById('status-filter').value;
            const sportFilter = document.getElementById('sport-filter').value;
            const searchTerm = document.getElementById('search').value.toLowerCase();

            document.querySelectorAll('.card').forEach(c => {
                const owned = c.classList.contains('owned');
                const cardText = c.textContent.toLowerCase();
                const sport = c.dataset.sport;
                let show = true;
                if (statusFilter === 'owned' && !owned) show = false;
                if (statusFilter === 'need' && owned) show = false;
                if (sportFilter === 'football' && sport !== 'nfl' && sport !== 'usfl') show = false;
                else if (sportFilter !== 'all' && sportFilter !== 'football' && sport !== sportFilter) show = false;
                if (searchTerm && !cardText.includes(searchTerm)) show = false;
                c.style.display = show ? '' : 'none';
            });
            updateStats();
        }

        function updateStats() {
            // Only count main cards, not alternates
            const mainCards = document.querySelectorAll('.card:not([style*="display: none"]):not(#alternates-cards .card)');
            const ownedMain = document.querySelectorAll('.card.owned:not([style*="display: none"]):not(#alternates-cards .card)').length;
            let totalValue = 0, ownedValue = 0, neededValue = 0;
            mainCards.forEach(c => {
                const price = parseFloat(c.dataset.price);
                totalValue += price;
                if (c.classList.contains('owned')) {
                    ownedValue += price;
                } else {
                    neededValue += price;
                }
            });
            document.getElementById('owned-count').textContent = ownedMain;
            document.getElementById('total-count').textContent = mainCards.length;
            document.getElementById('total-value').textContent = '$' + totalValue.toFixed(0);
            document.getElementById('owned-value').textContent = '$' + ownedValue.toFixed(0) + ' owned';
            document.getElementById('needed-value').textContent = '$' + neededValue.toFixed(0) + ' needed';
        }

        function clearAll() {
            const input = prompt('Type "CLEAR" to confirm clearing all checkmarks:');
            if (input === 'CLEAR') {
                ownedCards = [];
                saveOwned();
                document.querySelectorAll('.card').forEach(c => c.classList.remove('owned'));
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                updateStats();
            } else if (input !== null) {
                alert('Incorrect. Type "CLEAR" exactly to confirm.');
            }
        }

        function getBadgeHtml(badges) {
            return badges.map(b => {
                if (b === 'HOF') return '<span class="player-badge hof">HOF</span>';
                if (b.includes('SB')) return `<span class="player-badge sb">${b}</span>`;
                if (b.includes('PB')) return `<span class="player-badge pb">${b}</span>`;
                return '';
            }).join('');
        }

        function createCardElement(card) {
            const cardId = getCardId(card);
            const owned = isOwned(cardId);
            const price = card.price;
            const priceClass = price < 5 ? '' : price < 15 ? 'mid' : 'high';
            const searchUrl = `https://www.ebay.com/sch/i.html?_nkw=${card.search}&_sop=15&LH_BIN=1`;

            return `
                <div class="card ${owned ? 'owned' : ''}" data-price="${price}" data-sport="${card.sport}">
                    <div class="card-image-wrapper">
                        <span class="price-badge ${priceClass}">$${Math.round(price)}</span>
                        ${card.img
                            ? `<a href="${searchUrl}" target="_blank"><img class="card-image" src="${card.img}" alt="${card.set}" onerror="this.outerHTML='<a href=\\'${searchUrl}\\' target=\\'_blank\\' class=\\'card-image placeholder\\'>Click to view</a>'"></a>`
                            : `<a href="${searchUrl}" target="_blank" class="card-image placeholder">Click to view on eBay</a>`
                        }
                    </div>
                    <div class="player-name">${card.player}${getBadgeHtml(card.badges)}</div>
                    <div class="card-title">${card.set}</div>
                    <div class="card-number">${card.num} ${card.name}</div>
                    <div class="card-type">${card.type}</div>
                    ${!isReadOnly ? `<div class="checkbox-wrapper">
                        <input type="checkbox" id="${cardId}" ${owned ? 'checked' : ''} onchange="toggleOwned('${cardId}', this)">
                        <label for="${cardId}">Owned</label>
                    </div>` : (owned ? '<div class="owned-badge">✓ Owned</div>' : '')}
                    <a href="${searchUrl}" target="_blank" class="search-link">Search eBay</a>
                </div>
            `;
        }

        function toggleAlternatesSection() {
            const cardsEl = document.getElementById('alternates-cards');
            const toggleEl = document.getElementById('alternates-toggle');
            if (cardsEl.style.display === 'none') {
                cardsEl.style.display = '';
                toggleEl.classList.add('expanded');
            } else {
                cardsEl.style.display = 'none';
                toggleEl.classList.remove('expanded');
            }
        }

        // For players with alternates in the same sport, returns which card to show
        // (owned alternate if available, otherwise the primary)
        function getDisplayCard(playerCards) {
            const primaryCards = playerCards.filter(c => !c.alternate);
            const alternateCards = playerCards.filter(c => c.alternate);

            // Check if any alternate is owned
            const ownedAlternate = alternateCards.find(c => isOwned(getCardId(c)));
            if (ownedAlternate) {
                return ownedAlternate;
            }
            // Otherwise return the primary (or first card if no primary marked)
            return primaryCards[0] || playerCards[0];
        }

        function getYear(card) {
            const match = card.set.match(/\d{4}/);
            return match ? parseInt(match[0]) : 9999;
        }

        function renderCards() {
            // Combine all football cards (NFL + USFL) into one array
            const allFootballCards = [...cards.hof, ...cards.probowl, ...cards.usfl, ...cards.modern];

            // Sport-based sections
            const sportSections = [
                { section: 'football', cards: allFootballCards },
                { section: 'mlb', cards: cards.mlb },
                { section: 'nba', cards: cards.nba },
                { section: 'mls', cards: cards.mls },
            ];

            // Group cards by player AND sport to keep USFL/NFL cards separate
            const cardsByPlayerSport = {};
            sportSections.forEach(({cards: sectionCards}) => {
                sectionCards.forEach(card => {
                    const key = `${card.player}|${card.sport}`;
                    if (!cardsByPlayerSport[key]) {
                        cardsByPlayerSport[key] = [];
                    }
                    cardsByPlayerSport[key].push(card);
                });
            });

            // Determine which card should be displayed for each player+sport combo with alternates
            const displayCards = new Map();
            Object.entries(cardsByPlayerSport).forEach(([key, playerCards]) => {
                const hasAlternates = playerCards.some(c => c.alternate);
                if (hasAlternates) {
                    const displayCard = getDisplayCard(playerCards);
                    displayCards.set(displayCard, true);
                    // Mark all cards in this group for alternate handling
                    playerCards.forEach(c => {
                        if (c !== displayCard) {
                            displayCards.set(c, false); // false = should be hidden
                        }
                    });
                }
            });

            // Collect all alternate cards (that aren't the display card)
            const allAlternates = [];

            // Render each section, filtering out alternates (except display cards)
            sportSections.forEach(({section, cards: sectionCards}) => {
                const visibleCards = [];
                sectionCards.forEach(card => {
                    if (displayCards.has(card)) {
                        // This card is part of a group with alternates
                        if (displayCards.get(card) === true) {
                            visibleCards.push(card);
                        } else {
                            allAlternates.push(card);
                        }
                    } else {
                        // No alternates for this player+sport - show normally
                        visibleCards.push(card);
                    }
                });
                visibleCards.sort((a, b) => getYear(a) - getYear(b));
                document.getElementById(`${section}-cards`).innerHTML = visibleCards.map(createCardElement).join('');
            });

            // Render alternates section
            const alternatesSection = document.getElementById('alternates-section');
            const alternatesCount = document.getElementById('alternates-count');
            if (allAlternates.length > 0) {
                alternatesSection.style.display = '';
                alternatesCount.textContent = `(${allAlternates.length} cards)`;
                allAlternates.sort((a, b) => getYear(a) - getYear(b));
                document.getElementById('alternates-cards').innerHTML = allAlternates.map(createCardElement).join('');
            } else {
                alternatesSection.style.display = 'none';
            }

            updateStats();
        }

        document.getElementById('status-filter').addEventListener('change', applyFilters);
        document.getElementById('sport-filter').addEventListener('change', applyFilters);
        document.getElementById('search').addEventListener('input', applyFilters);

        async function init() {
            if (window.githubSync) {
                await githubSync.handleCallback();
                isReadOnly = !isOwner();
                updateAuthUI();
                githubSync.onAuthChange = async (loggedIn) => {
                    isReadOnly = !isOwner();
                    updateAuthUI();
                    if (loggedIn) {
                        await loadOwned();
                        renderCards();
                    }
                };
            } else {
                isReadOnly = true;
            }
            try {
                await loadOwned();
            } catch (e) {
                console.error('Failed to load data:', e);
            }
            renderCards();
            updateReadOnlyUI();
        }

        function updateReadOnlyUI() {
            const clearBtn = document.querySelector('button[onclick*="clearAll"]');
            if (clearBtn) clearBtn.style.display = isReadOnly ? 'none' : '';
            const authBar = document.getElementById('auth-bar');
            const existingNotice = document.querySelector('.read-only-notice');
            if (isReadOnly && !existingNotice) {
                const notice = document.createElement('span');
                notice.className = 'read-only-notice';
                notice.textContent = "Viewing iammike's collection";
                authBar.insertBefore(notice, authBar.querySelector('.right-section'));
            } else if (!isReadOnly && existingNotice) {
                existingNotice.remove();
            }
        }
        init();
    </script>
</body>
</html>
